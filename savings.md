FRM5.2.1

FRM 5.2.1 Карусель вкладов
--------------------------

При переходе на форму выполняется функциональное требование 5

**Экранная форма карусели вкладов (a, b, c)**

### Экранная спецификация карусели вкладов

##### Заголовок

Значение заголовка "Вклады и счета" хранится на стороне мобильного
приложения

##### Кнопка "Назад"

При нажатии осуществляет возврат на [FRM
5.1](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=68454392#id-5.%D0%92%D0%B8%D1%82%D1%80%D0%B8%D0%BD%D0%B0-FRM5.1)

##### Кнопка "Сравнить ставки"

1. При нажатии осуществляется переход на FRM 5.2.2

​2. Кнопка не доступна для нажатия во время загрузки карусели вкладов в
соответствии с функциональным требованием п.1 , внешний вид кнопки при
её недоступности соответствует "Экранная форма карусели вкладов (b)"

При получении ошибки во время загрузки данных кнопки и плейсхолдеры
кнопок не отображаются, согласно "Экранная форма карусели вкладов (c)"

##### Кнопка "Подобрать вклад"

При нажатии отображается форма FRM 5.2.10

##### Карусель вкладов

Состоит из следующих элементов:

1.  Картинка - Загружается по ссылке из поля headerPictureUrl в типе
    ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto
2.  Заголовок:
    1.  Содержится в поле name в типе
        ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto

    2.  Длинный заголовок необходимо перенести на вторую строку, если
        это позволяет размер экрана. Если не позволяет – отображать в
        одной строке и обрывать троеточием. Если название на большом
        экране не помещается в 2 строки, то конец второй строки
        необходимо обрывать троеточием.

3.  Подробная информация:
    1.  Содержится в поле shortDescription в типе
        ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto

    2.  Длинную подробную информацию необходимо отобразить в две строки.
        Если длина не помещается в две строки, то обрезать вторую строку
        троеточием.

4.  Ставка:
    1.  Необходимо отображать самую большую ставку для данной группы
        вкладов (для отдельного объекта AvailableSavingsProductInfoMto)
        среди данной валюты:
        1.  Из поля effectiveRateWithBonusOption
        2.  Если effectiveRateWithBonusOption не заполнено, то из поля
            nominalRateWithBonusOption
        3.  Если nominalRateWithBonusOption не заполнено, то из поля
            effectiveRate
        4.  Если effectiveRate не заполнено, то из поля nominalRate

    2.  Отображается в формате "до "+[ставка]+"%" (например, до 5,5%).
        Приставка "до" не отображается при выполнении всех условий для
        данной валюты и всех минимальных сумм:
        1.  Если имеется только одно значение nominalRate (или все
            значения совпадают)
        2.  Если имеется только одно значение effectiveRate (или все
            значения совпадают)
        3.  Если effectiveRateWithBonusOption
            и nominalRateWithBonusOption отсутствуют

    3.  Незначащие нули в значении ставки не отображаются

5.  Сумма:
    1.  Необходимо отображать минимальную сумму в рублях для данного
        объекта AvailableSavingsProductInfoMto
    2.  Поле отображается в формате: "от+ сумма+ валюта". Например: «от
        30 750 Р».
    3.  Направленное сервером значение суммы обрабатывается на мобильном
        приложении в соответствии с функциональным требованием п.2
    4.  Большое значение суммы уменьшается, чтобы поместиться полностью

6.  Срок:
    1.  Необходимо отображать нижнюю и верхнюю границы срока.
    2.  В нижней границе срока необходимо отображать минимальный срок по
        данному объекту AvailableSavingsProductInfoMto
    3.  В верхней границе необходимо отображать максимальный срок по
        данному объекту AvailableSavingsProductInfoMto
    4.  Если максимального срока у вклада нет (null), то это
        накопительный счёт, для которого вместо значения срока нужно
        отобразить "Бессрочный"
    5.  Нижняя и верхняя границы срока направляются в мобильное
        приложение в виде количества суток, на мобильном приложении
        нужно округлять до месяцев согласно функциональным требованиям
        п. 4
    6.  Если вклад имеет однодневный интервал (например 120-120), то
        необходимо посчитать число всех таких интервалов у вклада. Срок
        отображается в днях без конвертации, отображение зависит от
        количества интервалов:
        1.  Если один, то "Х дн."
        2.  Если два, то совпадающие сроки записываются через союз "или"
            как "Х или Х дн."
        3.  Если больше двух, то последние два срока записываются через
            союз "или", остальные сроки через запятую как "Х, Х, ... Х,
            Х или Х дн."

7.  Индикаторы "Пополнение" и "Снятие":
    1.  Индикатор "Пополнение " определяется значением поля
        isAdditionAvailable в типе
        ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto:
        1.  При истинном значении индикатор отображается в виде зелёной
            галочки
        2.  При ложном значении индикатор отображается в виде красного
            крестика

    2.  Индикатор "Снятие" определяется значением поля
        isSubstractionAvailable в типе
        ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto: 
        1.  При истинном значении идентификатор отображается в виде
            зелёной галочки
        2.  При ложном значении идентификатор отображается в виде
            красного крестика

    3.  Значки расположены слева от подписей "Пополнение"/"Снятие"
    4.  Индикаторы выровнены по левому краю

8.  Кнопка "Подробнее" - При нажатии отправляется запрос для загрузки
    расширенной информации согласно функциональным требованиям п. 2 для
    FRM 5.2.3 , отображается FRM 5.2.3

    \

### Функциональные требования

##### 5.2.1.1

FRM5.2.1FR1

Для загрузки информации по вкладам из систем банка в приложению может
понадобиться некоторое время. В то время, пока пользователь ожидает
обновление информации должен отображаться анимированный плейсхолдер
("Экранная форма карусели вкладов (b)") по аналогии с тем, что
пользователь видит на главной странице приложения при загрузке
продуктов. После того как все данные будут загружены, должны
отобразиться карточки вкладов в карусели.

Если на запрос
ru.vtb24.mobilebanking.protocol.GetAvailableSavingsProductsRequest
вернулась ошибка, в результате которой не удалось загрузить информацию
по вкладам, то отображается ошибка в виде пустой карточки ("Экранная
форма карусели вкладов (c)") с текстом. Текст ошибки "Что-то пошло не
так при получении данных. Обновите страницу." Текст ошибки хранится на
стороне МП. При нажатии на карточку с ошибкой осуществляется попытка
обновить данные с отображением плейсхолдера ("Экранная форма карусели
вкладов (b)").

Если на запрос
ru.vtb24.mobilebanking.protocol.GetAvailableSavingsProductsRequest
вернулось пустое множество вкладов, то должна отобразится ошибка в виде
пустой карточки с текстом ошибки ("Экранная форма карусели вкладов
(c)"), стрелка для обновления не отображается. Текст ошибки мобильное
приложение получает из ресурсов Минервы с параметрами
GroupName=BR-11766SavingsProducts и
Name=NoSavingsProductsAvailableMessage в соответствии с [функциональными
требованиями
1.7  ](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290) 

При этом плейсхолдер на изображении вклада является независимым и может
продолжать отображаться, когда остальные данные уже загрузились.

##### 5.2.1.2

FRM5.2.1FR2

Сначала производятся действия:

1.  У пришедшего с сервера числа необходимо отбросить знаки после
    запятой.
2.  Посчитать количество символов в числе – S
3.  Посчитать количество (непрерывное) нолей с конца числа - NL

Дальше производятся действия в зависимости от условий:

-   Если  S от 4 до 6 (здесь и далее оба числа включительно),
    и NL больше или равно 3, то последние Три ноля в числе необходимо
    заменить на «тыс.»  (с точкой)
-   Если  S от 7 до 9, и NL больше или равно 6, то последние Шесть нолей
    в числе необходимо заменить на «млн» (без точки)  
-   Если  S от 10 до 12, и NL больше или равно 9, то последние Девять
    нолей в числе необходимо заменить на «млрд» (без точки)  
-   Во всех остальных случаях замена не производится

Также необходимо производить дополнительные проверки:

-   Если сумма больше или равна нулю и меньше 1, то необходимо
    отображать 1

Полученную сумму необходимо отображать с интервалами между классами
числа (Например 6 789 876)

##### 5.2.1.3

FRM5.2.1FR3

Для формы доступно действие Pull-to-refresh, при котором на сервер
интеграции повторно отправляется запрос
ru.vtb24.mobilebanking.protocol.GetAvailableSavingsProductsRequest с
указанием refreshImmediately=true, выполняется функциональное требование
п.1

##### 5.2.1.4

FRM5.2.1FR4

Для перевода срока в днях в месяцы необходимо:

1.  Если AvailableSavingsProductInfoMto/id != \_MoneyBoxId\_ или перевод
    сроков выполняется внутри операции:
    1.  Если срок в днях меньше 30, то он равен 1 месяцу.
    2.  Если срок в днях больше или равен 30, то срок в днях разделить
        на 30 и округлить до меньшего целого числа. В Excel данная
        формула выглядит так: =ROUNDDOWN((D/30),0) где D – срок в днях,
        а 0 это количество знаков после запятой.

2.  Если AvailableSavingsProductInfoMto/id == \_MoneyBoxId\_:
    1.  Если срок в днях меньше 32, то он равен 1 месяцу.
    2.  Если срок в днях больше или равен 32, то срок в днях разделить
        на 30 и округлить до большего целого числа. В Excel данная
        формула выглядит так: =ОКРУГЛВВЕРХ((D/30),0) где D – срок в
        днях, а 0 это количество знаков после запятой.

##### 5.2.1.5

FRM5.2.1FR5

По событию перехода к форме для Android выполняется запрос
ServiceListRequest для получения признака доступности карусели вкладов.
В запросе у типа ru.vtb24.mobilebanking.protocol.ObjectIdentityMto
идентификатор id = значение поля id у типа UserInfoMto, type =
UserInfoMto. СИ направляет в Минерву id, указанный МП и
classType="AuthorizedUser". Для iOS данный запрос отправляется на
главном экране .

При наличии в ServiceListResponse доступного (enabled=1)
ru.vtb24.mobilebanking.protocol.security.ServiceInfoMto с id, содержащим
SavingsProductOpeningScenario, например
"opSrv;SavingsProductOpeningScenario;8":

1.  На сервер интеграции отправляется
    запрос ru.vtb24.mobilebanking.protocol.GetAvailableSavingsProductsRequest
    с указанием полей returnBonusOption=true и returnIdCollection=true
2.  Ображение плейсхолдера и ошибок на запрос осуществляется в
    соответствии с функциональным требованием 1
3.  Запрос отправляется один раз, результат сохраняется в локальном
    кэше, для последующего обновления используется существующий механизм
    кэш-токенов (cacheTokens)
4.  Поля, отображаемые на вкладе, возвращаются в
    ответе ru.vtb24.mobilebanking.protocol.AvailableSavingsProductsResponse.
    В карусели отображаются вклады только в рублях.

При отсутствии в ServiceListResponse
ru.vtb24.mobilebanking.protocol.security.ServiceInfoMto с id, содержащим
SavingsProductOpeningScenario:

1.  отображается ошибка в виде пустой карточки с текстом ошибки
    ("Экранная форма карусели вкладов (c)"), стрелка для обновления не
    отображается. Текст ошибки мобильное приложение получает из ресурсов
    Минервы с параметрами GroupName=BR-11766SavingsProducts и
    Name=NoSavingsProductsAvailableMessage в соответствии с 
    [функциональными требованиями
    1.7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290)

В случае если на запрос ServiceListRequest СИ вернул ошибку

1.  отображается ошибка в виде пустой карточки ("Экранная форма карусели
    вкладов (c)") с текстом. Текст ошибки "Что-то пошло не так при
    получении данных. Обновите страницу." Текст ошибки хранится на
    стороне МП. При нажатии на карточку с ошибкой осуществляется попытка
    обновить данные с отображением плейсхолдера ("Экранная форма
    карусели вкладов (b)").

##### 5.2.1.6

FRM5.2.1FR6

Нажатие на любое место карточки вклада аналогично нажатию кнопки
"Подробнее"

##### 5.2.1.7

FRM5.2.1FR7

Свайп карточек в карусели должен листать только одну карточку вне
зависимости от силы.

FRM5.2.2

FRM 5.2.2 Сравнение ставок
--------------------------

Для каждого объекта AvailableSavingsProductInfoMto может быть несколько
возможных вариантов вклада в зависимости от минимальной суммы, в
информации о ставках по вкладам необходимо отображать каждый такой
вариант. Каждый вариант группируется по AvailableSavingsProductInfoMto,
название вклада, сроки и индикаторы "Пополнение" и "Снятие" являются
общими для группы.

**\
**

**Экранная форма сравнения ставок**

### Экранная спецификация формы сравнения ставок

##### Заголовок

Значение заголовка "Процентные ставки" хранится на стороне мобильного
приложения

##### Кнопка "Назад"

При нажатии осуществляет возврат на FRM 5.2.1

##### Блок выбора валюты

1. Список из трёх валют (РУБ, USD, EUR) хранится на стороне мобильного
приложения

​2. По умолчанию выбрана самая левая валюта в списке

​3. В информации о ставках по вкладам отображается информация из типа
ru.vtb24.mobilebanking.protocol.product.DepositTermRangeInfoMto только в
выбранной валюте, которая выбирается по ключу валюты в
ru.vtb24.mobilebanking.protocol.CurrencyMto в типе
byCurrencyByMinBalanceTermRangeInfos

​4. Одновременно может быть выбрана только одна валюта, выбор другой
валюты автоматически отменяет выбор текущей

​5. Если вкладов в выбранной валюте нет, то валюта не отображается

​6. Блок выбора валюты выровнен по центру экрана

##### Переключатель "КУДА ПЕРЕВОДИТЬ ПРОЦЕНТЫ"

1. Позволяет выбрать только один из двух режимов отображения:

-   НА ВКЛАД
-   НА СЧЁТ

​2. При выборе режима отображения "НА ВКЛАД" в информации о ставках по
вкладам отображаются эффективные ставки (с капитализацией процентов) из
поля effectiveRate в типе
ru.vtb24.mobilebanking.protocol.product.DepositTermRangeInfoMto. Этот
режим выбран по умолчанию.

​3. При выборе режима отображения "НА СЧЁТ" в информации о ставках по
вкладам отображаются номинальные ставки ставки (без капитализации) из
поля nominalRate в типе
ru.vtb24.mobilebanking.protocol.product.DepositTermRangeInfoMto.

​4. При этом, если для каких-то вкладов нет effectiveRate или
nominalRate, то отображаются те ставки, которые есть, вне зависимости от
положения переключателя.

​5. Сбоку от переключателя располагается элемент подсказки (?), при
нажатии на который во всплывающем окне отображается текст подсказки.
Текст для подсказки (?) мобильное приложение получает из ресурсов
Минервы с параметрами GroupName=BR-11766SavingsProducts и
Name=DepositSelectorRadioButtonHint в соответствии с   [функциональными
требованиями
1.7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290)

​6. По умолчанию выбрано "НА ВКЛАД".

##### Информация о ставках по вкладам

Состоит из следующих элементов:

1.  Название вклада
    1.  Содержится в поле name в типе
        ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto,
        длинные названия вкладов должны обрезаться троеточием.
    2.  При нажатие на название запускается операция открытия вклада
        согласно функциональным требованиям п.1 у FRM 5.2.4 , отобража
        ется FRM 5.2.4

2.  Минимальная сумма вклада
    1.  Значение суммы содержится в поле double в типе
        byCurrencyByMinBalanceTermRangeInfos
    2.  Символ валюты отображается исходя из значения в поле
        displaySymbol в типе CurrencyMto
    3.  Отображается под названием вклада аналогично сумме вклада на FRM
        5.2.1

3.  Периоды и ставки вклада
    1.  Периоды вкладов отображаются в шапке таблицы:
        1.  Периоды являются общими для всех вкладов, при скролировании
            страницы вниз шапка таблицы с периодами прижимается к
            верхнему краю экрана.
        2.  Период записывается в месяцах, округление выполняется
            согласно функциональному требованию п. 4 у FRM 5.2.1 .
        3.  Сокращение в названии периода записывается с точкой,
            например "мес." Открытые интервалы без верхней границы (3
            мес. - null) записываются как "с 3 мес.".

    2.  Ставки отображаются в строках таблицы.
        1.  Ставки отображаются с округлением до двух знаков после
            запятой.
        2.  Самая крупная ставка для каждого варианта вклада в
            зависимости от суммы (Или несколько, если ставка максимальна
            у нескольких периодов) выделяется зелёным цветом

    3.  Ширина таблиц у всех вкладов одинаковая
    4.  Если ширина таблицы больше размера экрана, то пользователю
        доступна горизонтальная прокрутка, причем:
        1.  При прокрутке таблицы у одного вклада, таблицы остальных
            вкладов также прокручиваются
        2.  Остальные поля формы, такие как: Заголовок, Кнопка "Назад",
            Поле выбора валюты, Переключатель "Оставлять на вкладе\\
            Переводить на счёт", Название вклада, Минимальная сумма
            вклада, Индикаторы "Пополнение" и "Снятие" не
            прокручиваются, сохраняя текущее положение

    5.  Таблицы для групп вкладов формируются в соответствии с
        функциональным требованием п.1
    6.  Варианты одного вклада сортируются мобильным приложением в
        порядке возрастания суммы открытия

4.  Индикаторы "Пополнение" и "Снятие"
    1.  Отображается аналогично индикаторам на FRM 5.2.1

### Функциональные требования

##### 5.2.2.1

FRM5.2.2FR1

Для формирования таблиц со ставками мобильное приложение:

1. Высчитывает интервалы, общие для всех групп вкладов, причем:

-   Если нижняя и верхняя граница интервала в месяцах совпадает, то 
    интервал записывается одним числом (интервал 3-3 мес. - это 3 мес.)
-   Если интервалы, не являющиеся открытыми, пересекаются, то они
    объединяются в один с минимальной и максимальной границей среди всех
    объединённых интервалов (интервалы 1-90, 60-120 и 91-150
    объединяются в о один интервал 1-150)
-   Если какой-либо интервал включает в себя однодневный интервал, то в
    список попадает только обычный (интервалы 91-91 и 90-180 учитываются
    как 90-180)
-   Открытые интервалы без верхней границы (например. 91-null), нижняя
    граница которых меньше или равна самой большой верхней границы у
    других вкладов - игнорируются (интервал 91-null при наличии в списке
    интервалов 180-240 или 30-91 будет проигнорирован)

В результате мобильное приложение получает список доступных интервалов
(Например 3 мес.; 3-6 мес.; 6-13 мес.; 13-18 мес.), список сортируется
по нижней границе интервала, если совпадает - то по верхней.

​2. Высчитывает ставки для конкретного вклада (Например для
"Максимальный от 30 000 руб.") путём сравнения всех имеющихся интервалов
с интервалами вклада:

Отображается ставка вклада, если:

-   Интервал вклада полностью совпадает с общим или входит в него
    (90-120, 121-180, 140-140 и 130-150 входят в 90-180). Если в общий
    интервал вошло несколько однодневных или обычных, то отображается
    большая ставка.
-   Открытый интервал (30-null) вклада включает в себя общий интервал
    (90-180)
-   Нижняя граница открытого интервала вклада (90-null) попадает в общий
    (30-180).
-   Нижняя граница открытого интервала (30-null) меньше нижней границы
    общего открытого интервала (60-null) \

В других случаях отображается прочерк.

FRM5.2.3

FRM 5.2.3 Подробная информация по вкладу
========================================

**Экранная форма подробной информации по вкладу (a, b, c, d)**

### Экранная спецификация формы с подробной информацией по вкладу

##### Заголовок

Значение заголовка соответствует выбранному вкладу и отображается из
поля name в типе
ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto

##### Кнопка "Назад"

При нажатии осуществляет возврат:

-   на FRM 5.2.1 , если переход на форму был совершён с карусели вкладов
-   на FRM 5.2.10   , если переход был совершён из подборщика вкладов

##### Картинка

1. Для телефонов соответствует FRM 5.2.1

​2. Для планшетов загружается по ссылке из поля headerDetailsPictureUrl
в типе
ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto

##### Блок выбора валюты

1. Функционал блока выбора валюты соответствует аналогичному блоку на
FRM 5.2.2 , за исключением условия - если вклад доступен в валюте, кроме
"(РУБ, USD, EUR)", то такая валюта должна быть добавлена в блок выбора
валюты после основных, порядок валют, не являющихся основными, не имеет
значения. При этом:

-   Каждая валюта занимает 1/3 от области расположения валют на экране
-   Если блок выбора валюты не помещается на экране (Валют больше трёх),
    то блок заходит за правый край экрана, пользователю доступно
    горизонтальное скроллирование блока, при котором блок может заходить
    за левый край экрана.
-   При выборе валюты, которая не является ни первой ни последней в
    списке, блок скроллируется таким образом, чтобы выбранная валюта
    находилась в центре экрана.

​2. Информация о ставках соответствует выбранной в блоке валюте

##### Подсказка

1. Содержится в поле shortDescription в типе
ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto

​2. Текст подсказки не ограничен, отображается полностью.

Ставка, Сумма, Срок, Индикатор "Пополнение", Индикатор "Снятие"

1. Отображается в соответствии с макетом

​2. Значение соответствует FRM 5.2.1

##### Надпись над блоком "Информация о ставках"

Значение отображается из поля AvailableSavingsProductInfoMto/tagline
если оно заполнено

##### Переключатель режима капитализации

1. Значение заголовка блока "КУДА ПЕРЕВОДИТЬ ПРОЦЕНТЫ", текст хранится
на стороне мобильного приложения

​2. Переключатель позволяет выбрать два режима отображения:

-   "На вклад", выбран при переходе на форму, при выборе в информации о
    ставках отображается:\
    -   В колонке "Ставка" отображается ставка из effectiveRate
    -   В колонке "С опцией "Сбережения"" отображается ставка из
        effectiveRateWithBonusOption
-   "На Счёт", при выборе в информации о ставках отображается:
    -   В колонке "Ставка" отображается ставка из nominalRate
    -   В колонке "С опцией "Сбережения"" отображается ставка из
        nominalRateWithBonusOption \

​3. Если одного из типов ставок для вклада или счёта нет, то
переключатель не отображается. В информации отображается вид ставок,
который есть в наличии.

##### Информация о ставках

1. Информация о ставках в зависимости от срока формируется из объекта
ru.vtb24.mobilebanking.protocol.product.DepositTermRangeInfoMto и
соответствует выбранному вкладу.

​2. Информация отображается в виде скроллирующегося элемента в
соответствии с макетом, для которого сроки ставок отображаются
статичными, а сами ставки в зависимости от минимальной суммы вклада
могут меняться. Колонки отображаются равными по размерам, занимая всё
пространство экрана. В случае если название колонки не помещается на
одной строке, оно переносится на следующую строку. В случае если
название колонки не  помещается на двух строках, название колонки
отображается на двух строках, при этом последний помещающийся символ
заменяется многоточием.

Элемент включает в себя:

-   Колонка "Срок хранения", подпись хранится на стороне мобильного
    приложения
-   Колонка "Базовая ставка", подпись хранится на стороне мобильного
    приложения
-   Колонка "С опцией "Сбережения"", подпись хранится на стороне
    мобильного приложения
-   Переключатель минимальных сумм

​3. Колонка "Срок хранения":

-   Так как сроки могут быть разными в зависимости от минимальной суммы,
    столбец со сроками формируется по всем возможным срокам у данного
    вклада, исключая повторы (сроки с одинаковой верхней и нижней
    границей)
-   Если нижняя и верхняя граница интервала в месяцах совпадает, то
    интервал записывается одним числом даже при несовпадении границ в
    днях (интервал 3-3 - это 3)
-   Срок записывается в месяцах, правила округления соответствуют  FRM
    5.2.1
-   Если продукт содержит открытые интервалы без верхней границы
    (например, 120-null), то:
    -   Под сроком в месяцах нет указания срока в днях так, как он
        направлен с Минервы.
    -   Все интервалы записываются как открытые (90-119, 90-null или
        90-90 будет записан как "с 3 мес.").
-   Сокращённые названия сроков записываются с точкой, например, "мес."
    или "дн."
-   Список сроков сортируется по нижней границе интервала, если
    совпадает - то по верхней. Если нижняя совпадает, а верхняя
    отсутствует, то сначала отображается открытый интервал, а затем тот,
    что имеет верхнюю границу.

​4. Колонки "Базовая ставка" и "С опцией "Сбережения"":

-   Ставки отображаются с округлением до двух знаков после запятой.
-   Жирным начертанием выделяется ячейка таблицы с наибольшей ставкой
    (среди обеих колонок). Если таких ячеек несколько - выделяются все
    такие ячейки
-   Если для данного срока и суммы вклада нет доступной ставки, то
    отображается прочерк.
-   Колонка "Базовая ставка" отображает ставку в зависимости от
    переключателя режима капитализации
-   Колонка "С опцией "Сбережения"" отображает ставку в зависимости от
    переключателя режима капитализации, если ставки с опцией
    "Сбережения" для вклада или счёта нет, то столбец и блок
    "Сбережения" не отображается

​5. Переключатель минимальных сумм:

-   Суммы сортируются мобильным приложением в порядке возрастания
-   Сумма вклада должна быть отформатирована согласно  Функциональным
    требованиям №2 для FRM5.2.1 , суммы подписаны сверху как "СУММА:".
    Если минимальная сумма только одна, то элемент выбора сумм не
    отображается.
-   У выбранной суммы увеличивается шрифт.
-   Выбор суммы осуществляется нажатием на сумму или скролированием:
    -   для скролирования нужную сумму необходимо переместить на место
        выбранной
    -   при перемещении суммы скролируются и сами ставки
    -   пользователю доступно скролирование ставок, при котором
        скроллируются суммы
-   При выборе другой суммы значения в колонках "Базовая ставка" и "С
    опцией "Сбережения"" меняется на соответствующее выбранной сумме,
    выбранная сумма отображается прижатой к левому краю. 

##### Описание базовой ставки

1.  Значение отображается из поля savings/
    savingsProductCollection/savingsproduct/ limitsAndRates/
    baseRateDescription, если оно заполнено для выбранной валюты (поле
    limitsAndRates/isoCode должно совпадать с
    byCurrencyByMinBalanceTermRangeInfos/CurrencyMto/codeIso)

##### Блок "Сбережения"

1.  Находится под блоком "Информация о ставках"
2.  Состоит из:\
    -   заголовка, значение из
        AvailableSavingsProductsResponse/savingsOption/title
    -   текста, значение из
        AvailableSavingsProductsResponse/savingsOption/description
    -   ссылки, значение текста из
        AvailableSavingsProductsResponse/savingsOption/linkName. Android
        отображает полученный текст ссылки в вернем регистре

3.  При нажатии на ссылку необходимо проверить заполненность поля
    token/bonusProgram в ответе на
    ComplexServiceContractRequest (полученный для баннера "Сбережения"
    на FRM 5.1 ):
    1.  Если поле заполнено, то:
        1.  на сервер интеграции необходимо
            отправить BonusProgramRequest с полученным bonusProgram
        2.  на основании ответа отобразить форму детальной информации
            для
            BonusProgramResponse/bonusProgram/availableBonusOptions/BonusOptionMto
            с BonusOptionMto/id = SAVINGS:
            1.  Форма отображается согласно:
                1.  FRM 3.1.1.3 Форма "Детали подключаемой бонусной
                    опции" для iOS
                2.  FRM 3.1.1.2 Форма "Выбор бонусной опции" для Android
                    (Список опций при этом не отображается)

            2.  на полученной форме необходимо скрыть кнопку "Выбрать
                опцию"
            3.  Если данных о бонусной программе SAVINGS нет в ответе
                или на BonusProgramRequest  вернулась ошибка, то
                перехода не происходит, отображается стандартное окно от
                ошибке, при закрытии которого пользователь остаётся на 
                FRM 5.2.3

    2.  Иначе открывается FRM 5.2.12

##### Расширенная информация о вкладе

1.  Данные для отображения расширенной информации загружаются согласно
функциональным требованиям п. 2

​2. Ссылки на внешние страницы в направленном тексте должны быть
кликабельны и вести на страницы, которые должны открываться в отдельных
окнах.

​3. Расширенная информация должна динамически высчитывать высоту
отображаемой области, чтобы поддерживать раскрывающиеся элементы

##### Кнопка "Открыть вклад"

1. Кнопка «Открыть вклад» на странице с подробной информацией по вкладу
должна быть прикреплена к нижней части экрана и должна перемещаться
вместе с экраном пользователя.  

2. При нажатии запускается операция открытия вклада согласно
функциональным требованиям п.1 у FRM 5.2.4 , отображается   FRM 5.2.4

​3. Если максимального срока у вклада нет (null), то это накопительный
счёт, для которого вместо "Открыть вклад" нужно отобразить название
кнопки "Открыть счет"

### Функциональные требования

##### 5.2.3.1

FRM5.2.3FR1

Для загрузки расширенной информации по запросу http может понадобиться
некоторое время. В то время, пока пользователь ожидает обновление
информации должен отображаться анимированный плейсхолдер ("Экранная
форма подробной информации по вкладу (c)") по аналогии с тем, что
пользователь видит на главной странице приложения при загрузке
продуктов. После того, как расширенная информация будет загружена,
должна отобразиться вся информация на форме ("Экранная форма подробной
информации по вкладу (a)")

Если на запрос по http вернулась ошибка, в результате которой не удалось
загрузить расширенную информацию по вкладу, то на форме должна
отобразится карточка вклада, блок выбора валюты, информация о ставках и
кнопки, а на месте расширенной информации должен располагаться текст из
кода мобильного приложения "Описание вклада недоступно. Обновите
страницу." вместе со стрелкой для обновления.

При нажатии на блок со стрелочкой и текстом ошибки должна осуществляться
попытка обновить данные с помощью повторной отправки http-запроса с
отображением плейсхолдера ("Экранная форма подробной информации по
вкладу (c)").

##### 5.2.3.2

FRM5.2.3FR2

URL из поля productDescriptionURLPattern представлен в формате
http://ecse00100cec.epam.com:4505/content/v/ru/savings/carousel.mob.[id].html,
мобильное приложение добавляет вместо [id] идентификатор
соответствующего вклада из поля id в типе
AvailableSavingsProductInfoMto.

Для получения расширенной информации на полученный url отправляется
http-запрос. Все данные, полученные в ответе, отображаются в расширенной
информации

FRM5.2.4

FRM 5.2.4 Выбор суммы и источника средств при открытии вклада 
--------------------------------------------------------------

Экран выбора суммы является экраном операции и отрисовывается на
основании ответа:

-   ru.vtb24.mobilebanking.protocol.operation.OperationStageMetaMto на
    запрос
    ru.vtb24.mobilebanking.protocol.operation.StartOperationRequest для
    iOS приложений
-   ru.vtb24.mobilebanking.protocol.minervadirect.InputStageResponseMto на
    запрос ru.vtb24.mobilebanking.protocol.minervadirect.StartScenarioRequest для
    Android приложений

Запуск операции открытия вклада описан в  функциональных требованиях п.1

Фон экрана устанавливается белым для соответствующего шага операции:

-   stepId=INPUT для iOS
-   stage=INPUT для Android

,при ус ловии, что это экран операции открытия вклада (определяется
согласно функциональному требованию п. 2 )

**Экранная форма выбора суммы и источника средств при открытии вклада
(a, b, с)**

### Экранная спецификация формы выбора суммы и источника средств при открытии вклада

##### Заголовок

Значение заголовка передаётся с Минервы в поле title

##### Кнопка "Назад"

Стандартный для приложения Элемент прерывания операции

##### Элемент подсказки (i)

Стандартный для приложения [Элемент подсказки
(i)](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=68454407#id-9.%D0%9E%D0%B1%D1%89%D0%B8%D0%B5%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-hint)

##### Заголовок блока выбора суммы

Текст заголовка Минерва передаёт в поле:

-   text в StageLabelMto для Android
-   value в ParameterMetaMto для iOS

Текст должен быть выровнен по центру.

##### Блок выбора суммы

​1. Поле суммы отображается в соответствии с макетом:

-   Для iOS - eсли это ParameterMetaMto c id=Sum и hint=Money при
    условии, что это экран операции открытия вклада (определяется
    согласно функциональному требованию п. 2 )
-   Для Android - если это StageFieldMto с name=Sun и tint=Money при
    условии, что это экран операции открытия вклада (определяется
    согласно функциональному требованию п. 2 )

​2. При установке фокуса в поле появляется цифровая клавиатура. В поле
допускается вводить только цифры. Ввести точки и запятые в поле для
отделения копеек нельзя.

​3. Сумму необходимо отображать с интервалами между классами числа
(Например 6 789 876,65)

​4. Сумма отображается в формате X XXX без указания дробной части.

​5. Мнемоника валюты передаётся в поле Dimension

​6. При введении суммы справа от неё отображается крестик для очистки
поля, при нажатии на крестик поле суммы очищается, остаётся только
курсор и символ валюты. При смене фокуса в поле отображается значение
0,00.

​7. Поле суммы направляется вместе с валидацией, валидация
осуществляется при нажатии на кнопку "Далее":

-   Валидация максимального значения в типе CompareOperatorMto в списке
    restrictions, при превышении максимального значения мобильное
    приложение без обращения к серверу выводит сообщение об ошибке из
    поля message
-   Валидация минимального значения в типе CompareOperatorMto в списке
    restrictions, при введении слишком маленькой суммы мобильное
    приложение без обращения к серверу выводит сообщение об ошибке из
    поля message
-   Валидация непустого значения в типе NotNullRestrictionMto в списке
    restrictions, если пользователь не ввёл значение в поле, то
    мобильное приложение без обращения к серверу выводит сообщение об
    ошибке из поля message

##### Блок выбора валюты

​1. Список валют передаётся в списочном поле:

-   Для iOS в поле ValueListMto, для запроса которого мобильное
    приложение отправляет StageElementValuesListRequest с указанием в
    listId идентификатора списка
-   Для Android в поле ListItemMto, для запроса которого мобильное
    приложение отправляет StageElementValuesListRequest с указанием в
    listId идентификатора listTicket, направленного в поле StageFieldMto

Валюты сортируются на стороне Минервы. Название валюты направляет
Минерва в поле name. Отображение соответствует FRM 5.2.3

​2. Если клиент выбрал валюту вклада, а мастер счёта в данной валюте
нет, то поле с источником средств исчезает, а на его месте появляется
сообщение о том, что для открытия вклада необходимо открыть счёт в
соответствующей валюте. Сообщение направляет Минерва в поле:

-   Для iOS ParameterTypeMto в котором id=InfoPanel
-   Для Android StageLabelMto с metadata.type=InfoPanel

​3. При выборе валюты срабатывает событие ON\_CHANGED, на сервер
интеграции направляется запрос:

-   Для iOS HandleOperationRequest, приложение отрисовывает экран на
    основании ответа OperationStageMetaMto
-   Для Android HandleScenarioStageRequest, приложение отрисовывает
    экран на основании ответа InputStageResponseMto

​4. После отрисовки экрана на основании ответа Минервы блок
скроллируется таким образом, чтобы выбранная валюта находилась в центре
экрана. При выборе валюты скролирования не происходит.

​5. Отображение соответствует макетам при условии получения:

-   Для iOS ParameterTypeMto в котором id=CurrencyCode
-   Для Android StageFieldMto с name=CurrencyCode

##### Заголовок блока выбора источника средств

Текст заголовка Минерва передаёт в поле:

-   text в StageLabelMto для Android
-   value в ParameterMetaMto для iOS

Текст должен быть выровнен по центру.

##### Блок выбора источника средств

1. Список источников средств направляется в поле:

-   Для iOS в поле ValueListMto, для запроса которого мобильное
    приложение отправляет StageElementValuesListRequest с указанием в
    listId идентификатора списка
-   Для Android в поле ListItemMto, для запроса которого мобильное
    приложение отправляет StageElementValuesListRequest с указанием в
    listId идентификатора listTicket, направленного в поле StageFieldMto

​2. Список содержит сверху заголовок, заголовок направляется в поле
label, заголовок выровнен по центру для ValueListMto при условии, что
это экран операции открытия вклада (определяется согласно
функциональному требованию п. 2 )

##### Кнопка "Далее"

1. Представляет собой кнопку по умолчанию на экране операции:

-   Для iOS id=defaultActionId из OperationStageMetaMto
-   Для Android имя команды name из типа StageCommandMto указано в поле
    defaultCommand в типе StageResponseMto

​2. При нажатии на сервер отправляется запрос:

-   Для iOS HandleOperationRequest с указанием в operationStageData в
    поле actionId идентификатора данного элемента, Минерва возвращает
    OperationStageMetaMto, на основании которого мобильное приложение
    отрисовывает экран согласно FRM 5.2.4
-   Для Android HandleScenarioStageRequest с указанием в поле actionId
    идентификатора данного элемента, Минерва возвращает
    InputStageResponseMto, на основании которого мобильное приложение
    отрисовывает экран согласно FRM 5.2.4

​3. Кнопка может располагаться на клавиатуре в виде [блока
навигации](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=69176600#RS-%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D1%8B-FRM5)

​4. При отсутствии мастер-счёта в выбранной валюте Минерва направляет
кнопку неактивной:

-   disabled=true в ActionMetaMto для iOS
-   disabled=true в StageCommandMto для Android

### Функциональные требования

##### 5.2.4.1

FRM5.2.4FR1

Для начала операции открытия вклада мобильное приложение отправляет на
сервер интеграции:

​1) Для iOS запрос
ru.vtb24.mobilebanking.protocol.operation.StartOperationRequest с
operationId = идентификатор ServiceInfoMto, полученный для баннера
"Сбережения" на витрине, например
"opSrv;SavingsProductOpeningScenario;8" и указанием в parameters
следующих объектов:

-   id = activatorObject value = ObjectIdentityMto с типом type =
    ServiceInfoMto и идентификатором id = идентификатор ServiceInfoMto,
    полученный для баннера "Сбережения" на витрине, например
    "opSrv;SavingsProductOpeningScenario;8"
-   id = initObject, value = ObjectIdentityMto с типом type =
    UserInfoMto и идентификатором id = значение поля id у типа
    UserInfoMto
-   id = inParameterizedObject, value =
    объект ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto
    со всеми заполненными полями:

1.  1.  В ByCurrencyByMinBalanceTermRangeInfos нужно передавать только
        одну валюту CurrencyMto, и одну минимальную сумму в этой валюте
        из поля double
    2.  Поле DepositTermRangeInfoMto передаваться не должно

​2) Для Android запрос
ru.vtb24.mobilebanking.protocol.minervadirect.StartScenarioRequest с
указанием следующих объектов:

-   В поле activatorObject объект ObjectIdentityMto с типом type =
    ServiceInfoMto и идентификатором id = идентификатор ServiceInfoMto,
    полученный для баннера "Сбережения" на витрине, например
    "opSrv;SavingsProductOpeningScenario;8"
-   В поле initObject объект ObjectIdentityMto с типом type =
    UserInfoMto и идентификатором id = значение поля id у типа
    UserInfoMto
-   В поле inParameterizedObject объект
    ru.vtb24.mobilebanking.protocol.product.AvailableSavingsProductInfoMto
    со всеми заполненными полями: 

1.  1.  В ByCurrencyByMinBalanceTermRangeInfos нужно передавать только
        одну валюту CurrencyMto, и одну минимальную сумму в этой валюте
        из поля double
    2.  Поле DepositTermRangeInfoMto передаваться не должно 

И для Android и для iOS валюта и минимальная сумма для
AvailableSavingsProductInfoMto должны быть определены в зависимости от
того, с какой формы была запущена операция:\

-   Если операция запущена со сравнения ставок FRM 5.2.2 или с подробной
    информации по вкладу FRM 5.2.3 , то указывается выбранная валюта и
    наименьшая из минимальных сумм
-   Если операция запущена при нажатии на карточке вклада на FRM 5.2.10
    , то указывается выбранная валюта, введённая в подборщике сумма, а
    также в поле DepositTermRangeInfoMto необходимо передавать выбранный
    в подборщике день в виде minimumTermInDays (maximumTermInDays при
    этом не указывается) и только одну ставку в зависимости от
    выбранного режима капитализации. Переданный срок должен
    соответствовать одному из сроков для данного вклада, если выбранный
    в подборщике день не соответствует ни одному из сроков вклада, то
    выбирается самый близкий день, попадающий в границы вклада (Если
    минимальный срок однодневного вклада 30-30, а в подборщике выбран
    срок в 28 дней, то в запросе необходимо передать 30). 

##### 5.2.4.2

FRM5.2.4FR2

Мобильное приложение считает ответ Минервы экраном операции открытия
вклада, применяя соответствующие правила оформления, если был получен
соответствующий идентификатор:

-   operationId=4786 для iOS
-   code=4786 для Android

Правила применяются на всех экранах на протяжении всей операции.

FRM5.2.5

FRM 5.2.5 Выбор срока при открытии вклада
-----------------------------------------

Фон экрана устанавливается белым для соответствующего шага операции:

-   stepId=INPUT для iOS
-   stage=INPUT для Android

, при условии, что это экран операции открытия вклада (определяется
согласно функциональному требованию п. 2 FRM 5.2.4 )

**Экранная форма выбора срока при открытии вклада (a, b, с)**

### Экранная спецификация формы выбора срока при открытии вклада

##### Заголовок

Значение заголовка передаётся с Минервы в поле title

##### Кнопка "Назад"

Функционал элемента описан в [RS BR-14697 Оптимизация платежей и
переводов в МП на
FRM7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=69176600#RS-%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D1%8B-FRM7)

##### Элемент подсказки (i)

Стандартный для приложения [Элемент подсказки
(i)](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=68454407#id-9.%D0%9E%D0%B1%D1%89%D0%B8%D0%B5%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-hint)

##### Блок выбора срока вклада

1. Элементы блока направляются в виде списка в поле:

-   Для iOS в поле ValueListMto, для запроса которого мобильное
    приложение отправляет StageElementValuesListRequest с указанием в
    listId идентификатора listId, направленного в поле ParameterMetaMto
-   Для Android в поле ListItemMto, для запроса которого мобильное
    приложение отправляет StageElementValuesListRequest с указанием в
    listId идентификатора listTicket, направленного в поле StageFieldMto

Поле содержит список объектов нового типа DaysRatePair, которое включает
в себя три поля:

-   Days, для отображения срока
-   Rate, для отображения ставки
-   IsShowInDays, флаг, говорящий, что срок отображается без конвертации
    в месяцы

​2. Количество дней выбранного по умолчанию срока передаётся в поле:

-   value в типе ParameterMetaMto для iOS
-   value в типе StageFieldMto для Android

Пользователь может выбрать другой срок вклада путём нажатия на элемент
срока.

​3. Ставки отображаются в разных цветах:

-   Зелёным цветом мобильное приложение отображает самую большую ставку
-   Ставку выбранного периода отображает синим
-   В ыбранная самая большая ставка отображается зелёным цветом
-   Остальные ставки отображаются в сером цвете в соответствии с макетом

​4. Срок вклада в поле Days указан в сутках и отображается вместе с
сокращением "дн."

Если IsShowInDays=0, то мобильное приложение должно отображать его в
месяцах, проведя конвертацию согласно функциональным требованиям п. 4 у
FRM 5.2.1 , при этом отображается вместе с сокращением "мес."

​5. При выборе другого срока вклада срабатывает событие ON\_CHANGED, на
сервер интеграции направляется запрос:  

-   Для iOS HandleOperationRequest, приложение отрисовывает экран на
    основании ответа OperationStageMetaMto. В качестве значения
    выбранного элемента списка передаётся Days.
-   Для Android HandleScenarioStageRequest, приложение отрисовывает
    экран на основании ответа InputStageResponseMto. В качестве значения
    выбранного элемента списка передаётся Days.

​6. Выбранный срок центрируется после получения с сервера интеграции.
При центрировании не допускается оставлять отступы от блока выбора срока
слева и справа экрана.  

​7. Название блока передаётся в поле: 

-   label в типе ParameterMetaMto для iOS
-   name в TitlesMto в типе StageFieldMto для Android

Текст должен быть выровнен по центру.

##### Календарь и указание срока в днях

1. Состоит из текстового описания срока в днях и даты закрытия вклада, а
также кнопки для выбора даты закрытия вклада.

2. Передаётся с сервера интеграции:

-   Для iOS в ParameterMetaMto с type=DATE
-   Для Android в StageFieldMto с tint=Date в типе type

отображается согласно макету, при условии, что это экран операции
открытия вклада (определяется согласно функциональному требованию п. 2
FRM 5.2.4 )

​3. Кнопка выбора даты отображается при получении:

-   Для iOS readOnly=0 в типе ParameterMetaMto
-   Для Android disabled=false в типе StageFieldMto

При нажатии на кнопку выбора даты закрытия вклада отображается
стандартный для приложения календарь в pop-up, описанный в [RS BR-12955
«Получение справок в
ВТБ-онлайн»](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=68457556#RSBR-12955%C2%AB%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D0%BA%D0%B2%D0%92%D0%A2%D0%91-%D0%BE%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD%C2%BB-FRM7)
 

​4. После выбора даты в календаре срабатывает событие ON\_CHANGED, на
сервер интеграции направляется запрос:  

-   Для iOS HandleOperationRequest, приложение отрисовывает экран на
    основании ответа OperationStageMetaMto.
-   Для Android HandleScenarioStageRequest, приложение отрисовывает
    экран на основании ответа InputStageResponseMto.

​5. Число дней до закрытия присылает Минерва в поле:

-   для iOS в поле componentDescription в типе ParameterMetaMto
-   для Android в поле message в AdditionalInformationMto в поле
    additionalInformation в типе StageFieldMto

​6. Выбранная в календаре дата передаётся с сервер интеграции в поле:

-   Для iOS value в типе ParameterMetaMto
-   Для Android value в типе StageFieldMto

​7. Строку формирует мобильное приложение, используя число дней,
направленное Минервой:\

-   число дней числом
-   обозначение:

1.  1.  "день", для числа дней, оканчивающихся на 1
    2.  "дня", для числа дней, оканчивающихся на 2,3,4
    3.  "дней", в остальных случаях

-   предлог "до"
-   выбранная в календаре дата в формате "8 Мая 2019"

##### Информация о ставке и доходе

1. Направляет Минерва в двух полях:

-   Для iOS два ParameterMetaMto с readOnly=1
-   Для Android два StageFieldMto с disabled=true

​2. Названия - "Ставка" и "Доход" направляются в полях:

-   label в ParameterMetaMto в iOS
-   name в TitlesMto в StageFieldMto в Android

​3. Значения:

-   Для ставки - числовое значение в поле value, мобильное приложение
    отображается два знака после запятой. Символ процентов в поле:\
    -   для iOS в поле componentDescription в типе ParameterMetaMto
    -   для Android в поле hint в типе StageFieldMto
-   Для дохода - числовое значение в поле value, Отображение с
    разбиением на классы числа (34 000) производит мобильное приложение.
    Копейки не отображаются. А если значение дохода будет длинным, то
    нужно уменьшать шрифт. Символ валюты в поле: \
    -   для iOS в поле componentDescription в типе ParameterMetaMto
    -   для Android в поле hint в типе StageFieldMto

​4. Поля отображаются как на макете, если:

-   Были получены оба поля с: \
    -   id=Income (Доход) и id=Percent (Ставка) для iOS
    -   name=Income (Доход) и name=Percent (Ставка) для Android
-   Это экран операции открытия вклада (определяется согласно
    функциональному требованию п. 2 FRM 5.2.4 )

##### Переключатель "Оставлять проценты на вкладе"

1. Стандартный для приложения
[Переключатель](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=68454407#id-9.%D0%9E%D0%B1%D1%89%D0%B8%D0%B5%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-checkbox)

​2. Подсказка к переключателю направляется в поле:  

-   для iOS в поле componentDescription в типе ParameterMetaMto
-   для Android в поле message в AdditionalInformationMto в поле
    additionalInformation в типе StageFieldMto

##### Неснижаемый остаток

1. Неснижаемый остаток передаётся в списочном поле:

-   Для iOS в поле ValueListMto, для запроса которого мобильное
    приложение отправляет StageElementValuesListRequest с указанием в
    listId идентификатора listId, направленного в поле ParameterMetaMto
-   Для Android в поле ListItemMto, для запроса которого мобильное
    приложение отправляет StageElementValuesListRequest с указанием в
    listId идентификатора listTicket, направленного в поле StageFieldMto
     

Поле содержит список объектов нового типа AmountRatePair, которое
включает в себя два поля: 

-   Amount, для отображения суммы
-   Rate, для отображения ставки

​2. Мнемоника валюты передаётся в поле Dimension в типе:

-   ValueListMto для iOS
-   ListItemMto для Android

​3. При нажатии осуществляется переход на FRM 5.2.6 для выбора
неснижаемого остатка

​3. Заголовок направляется в поле:

-   label в ParameterMetaMto в iOS
-   name в TitlesMto в StageFieldMto в Android

​4. Элемент подсказки:

-   (?) для iOS
-   (i) для Android

направляется в поле:

-   description в ParameterMetaMto для iOS
-   description в TitlesMto в StageFieldMto для Android

##### Кнопка "Далее"

1. Представляет собой кнопку по умолчанию на экране операции:

-   Для iOS id=defaultActionId из OperationStageMetaMto
-   Для Android имя команды name из типа StageCommandMto указано в поле
    defaultCommand в типе StageResponseMto

​2. При нажатии на сервер отправляется запрос:

-   Для iOS HandleOperationRequest с указанием в operationStageData в
    поле actionId идентификатора данного элемента, Минерва возвращает
    OperationStageMetaMto, на основании которого мобильное приложение
    отрисовывает экран согласно FRM 5.2.7
-   Для Android HandleScenarioStageRequest с указанием в поле actionId
    идентификатора данного элемента, Минерва возвращает
    ConfirmationStageResponseMto, на основании которого мобильное
    приложение отрисовывает экран согласно FRM 5.2.7

FRM5.2.6

FRM 5.2.6 Выбор неснижаемого остатка
------------------------------------

**Экранная форма выбора неснижаемого остатка**

### Экранная спецификация формы выбора неснижаемого остатка

##### Заголовок

Соответствует заголовку поля "Неснижаемый остаток" на FRM 5.2.5

##### Кнопка "Назад"

При нажатии осуществляет возврат на FRM 5.2.5

##### Список неснижаемых остатков

1. Состоит из двух полей - суммы и ставки

​2. Сумма:

-   Подписана сверху как "СУММА", текст хранится на стороне мобильного
    приложения
-   Отображает значение поля Amount из типа AmountRatePair
-   Суммы должны быть разделены на разряды, копейки отбрасываются, не
    округляются (формат - X XXX)
-    После значения суммы отображается символ валюты из поля Dimension в
    типе: \
    -   ValueListMto для iOS
    -   ListItemMto для Android

​3. Ставка:

-   Подписана сверху как "СТАВКА", текст хранится на стороне мобильного
    приложения
-   Отображает значение поля Rate из типа AmountRatePair
-   Ставки отображаются с округлением до двух знаков в формате "Х,ХХ%"
-   Символ ставки добавляется мобильным приложением
-   Ставки отображаются в разных цветах:

-   -   Зелёным цветом мобильное приложение отображает самую большую
        ставку

    -   Остальные ставки отображаются в сером цвете в соответствии с
        макетом

    -   В ыбранная самая большая ставка отображается зелёным цветом

    -   Ставку выбранного периода отображ ает синим

-   Справа от выбранной ставки отображается символ галочки в синем
    цвете.

​4. При выборе неснижаемого остатка из списка (по нажатию) срабатывает
событие ON\_CHANGED, на сервер интеграции направляется запрос:  

-   Для iOS HandleOperationRequest, приложение отрисовывает экран FRM
    5.2.5 на основании ответа OperationStageMetaMto. В качестве значения
    выбранного элемента списка передаётся Amount.
-   Для Android HandleScenarioStageRequest, приложение отрисовывает
    экран FRM 5.2.5  на основании ответа InputStageResponseMto. В
    качестве значения выбранного элемента списка передаётся Amount.

​5. При скроллировании списка элементов подписи столбцов остаются
прижаты к заголовку формы и не скроллируются.

FRM5.2.7

FRM 5.2.7 Подтверждение операции открытия вклада
------------------------------------------------

**Экранная форма подтверждения открытия вклада**

### Экранная спецификация формы подтверждения открытия вклада

##### Заголовок, Кнопка "Назад", Параметры подтверждения, Блок подтверждения операции

Функционал отображения элементов не изменяется

##### Подсказка

Текст подсказки Минерва передаёт в поле:

-   text в StageLabelMto для Android
-   value в ParameterMetaMto для iOS

FRM5.2.8

FRM 5.2.8 Квитанция открытия вклада
-----------------------------------

Функционал отображения соответствует  FRM 5.5.3 Форма " Квитанция об
открытии накопительного счёта" , при условии, что это экран операции
открытия вклада (определяется согласно функциональному требованию п. 2
FRM 5.2.4 )

FRM 5.2.9 "Информация о том, что клиенту не доступны вклады" FRM5.2.9
---------------------------------------------------------------------

**\
**

**Экран с информацией о том, что клиенту не доступны вклады**  

### Экранная спецификация формы "Информация о том, что клиенту не доступны вклады"

##### Стрелка "Назад"

При нажатии осуществляет возврат на FRM 5.1

##### Картинка

Загружается с сервера интеграции по имени vitrina\_deposit\_bg.jpg
аналогично баннеру "Сбережения" на витрине

##### Текст-заголовок

1. Текст мобильное приложение получает из ресурсов Минервы с параметрами
GroupName=BR-11766SavingsProducts и Name=OpeningNotAvailableTitle в
соответствии с [функциональными требованиями
1.7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290)

​2. Отображение в соответствие с макетом осуществляет мобильное
приложение

​3. Текст поддерживает bb-коды, включая гиперссылки

##### Текст 1

1. Текст мобильное приложение получает из ресурсов Минервы с параметрами
GroupName=BR-11766SavingsProducts и Name=OpeningNotAvailableCSAText в
соответствии с [функциональными требованиями
1.7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290)

​2. Текст поддерживает bb-коды, включая гиперссылки

##### Иконка

Хранится на стороне мобильного приложения, соответствует макету

##### Текст 2

1. Текст мобильное приложение получает из ресурсов Минервы с параметрами
GroupName=BR-11766SavingsProducts и Name=OpeningNotAvailableAccountText
в соответствии с [функциональными требованиями
1.7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290)

​2. Текст поддерживает bb-коды, включая гиперссылки

FRM 5.2.10 Подборщик FRM5.2.10
==============================

**\
**

**Экран с информацией о том, что клиенту не доступны вклады**  

### Экранная спецификация формы "Информация о том, что клиенту не доступны вклады"

##### Стрелка "Назад"

При нажатии осуществляет возврат на форму, на которой был открыт
подборщик

##### Заголовок

Значение заголовка "Подбор вклада" хранится на стороне мобильного
приложения

##### Подсказка (i)

Сбоку от заголовка располагается элемент подсказки (i), при нажатии на
который во всплывающем окне отображается текст подсказки. Текст для
подсказки (i) мобильное приложение получает из ресурсов Минервы с
параметрами GroupName=BR-11766SavingsProducts и Name=DepositSelectorHint
в соответствии с  [функциональными требованиями
1.7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290)

##### Элемент выбора валюты

1. Функционал отображения соответствует аналогичному элементу на FRM
5.2.3

​2. Отображаются все валюты из всех возможных вкладов

​3. При переключении валюты:

-   Если клиент не менял сумму по-умолчанию, то сумма в поле
    сравнивается с самой минимальной для всех вкладов в данной валюте.
    Если сумма в поле меньше, то она изменяется на минимальную
-   Если клиент изменил сумму по-умолчанию, то сумма в поле не
    пересчитывается

##### Поле ввода суммы вклада

1. Поле имеет заголовок "СУММА", который хранится на мобильном
приложении

​2. Символ валюты отображается из поля displaySymbol для выбранной
CurrencyMto

​3. Формат суммы Х ХХХ Р

​4. При переходе на форму по умолчанию отображается наименьшая из
минимальных сумм в выбранной валюте

​5. В поле можно ввести сумму от 0 до 999 999 999 999

​6. По умолчанию в поле выбрана сумма 30 000 руб.

​7. Поле ограниченно максимально возможной суммой. Если пользователь
ввёл слишком большую сумму (Условие проверяется после изменения поля
согласно функциональному требованию п.4 ), то сумма уменьшается до
максимально возможной. Максимальные суммы приложение получает из
ресурсов Минервы с параметрами GroupName=BR-11766SavingsProducts и Name
=DefaultSelectorValues в соответствии с  [функциональными требованиями
1.7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290).
В ресурсе содержится json с указанием списка кодов валюты и
максимального значения в поле maxValue. Если валюта не присутствует в
списке, то её максимальное значение считается равным 50 000 000 у. е.

##### Поле выбора срока вклада

1. Поле имеет заголовок "СРОК", который хранится на мобильном приложении

​2. При нажатии на элемент выбора срока отображается FRM 5.2.11

​3. Срок отображается как:

-   "Х мес.", "Х год", "Х года" или "Х лет", если выбран один из
    предложенных сроков на FRM 5.2.11
-   "до [dd.mm](http://dd.mm).yyyy", если на FRM 5.2.11  был выбран
    произвольный период

​4. По умолчанию в поле выбран срок "6 мес".

##### Переключатель капитализации

1. Функционал отображения соответствует FRM 5.2.2

​2. При выборе режима отображения "НА ВКЛАД" в поле выбора срока и в
списке подобранных вкладов отображаются эффективные ставки (с
капитализацией процентов) из поля effectiveRate в типе
ru.vtb24.mobilebanking.protocol.product.DepositTermRangeInfoMto.

​3. При выборе режима отображения "НА СЧЁТ" в поле выбора срока и в
списке подобранных вкладов отображаются номинальные ставки ставки (без
капитализации) из поля nominalRate в типе
ru.vtb24.mobilebanking.protocol.product.DepositTermRangeInfoMto.

​4. Если какого-либо значения ставки нет, то отображается имеющийся

##### Список подобранных вкладов

1. Список подобранных вкладов отображается в виде карусели:

-   Список подобранных вкладов формируется согласно функциональному
    требованию п.1
-   Под каруселью отображаются таб-точки:
    -   Выбранный вклад отмечается закрашенной точкой.
    -   Таб-точки при одном вкладе не отображаются, пространство для них
        при этом схлопывается.
    -   Если таб-точек больше 11, то отображаются только 11 точек, при
        этом выполняются условия:
        -   При пролистывании карусели вкладов пользователь доходит до
            предпоследней отображаемой таб-точки на экране, при
            последующем пролистывании выделенная таб-точка остается
            предпоследний до тех пор, пока не будет осуществлен переход
            на последний вклад. При скролировании на предпоследней точке
            должна быть анимация перехода на следующую точку,
            имитирующая перемещение. Таким образом достигается «эффект
            Карусели».\
        -   При пролистывании вкладов обратно с права на лево к первым в
            списке должна быть анимация перехода на следующую точку,
            имитирующая перемещение. Когда пользователь достигает
            предпоследней отображаемой таб-точки на экране, при
            последующем пролистывании выделенная таб-точка остается
            предпоследний до тех пор, пока не будет осуществлен перехода
            на последний слайд. При скролировании на предпоследней точке
            должна быть анимация перехода на следующую точку,
            имитирующая перемещение. Таким образом достигается «эффект
            Карусели»

​2. Каждый подобранный вклад содержит:

-   Картинку, соответствует FRM 5.2.1
-   Название вклада, соответствует FRM 5.2.1 , отображается в одну
    строку
-   Ставку:
    -   Для AvailableSavingsProductInfoMto\\id=\_MoneyBoxId\_ и
        AvailableSavingsProductInfoMto\\id=\_SavingsAccountId\_
        отображается самая большая ставка для данной валюты и режима
        капитализации в формате "до Х,ХХ%".
    -   Для остальных продуктов отображается ставка вклада для выбранной
        валюты, суммы, срока и режима капитализации, отображается с
        округлением до двух знаков в формате "Х,ХХ%".
-   Минимальная сумма вклада, соответствует FRM 5.2.1 , сокращается
-   Сумма к концу периода, доход и доход в месяц:
    -   Рассчитывается :
        -   Для AvailableSavingsProductInfoMto\\id= \_MoneyBoxId\_
            согласно функциональному требованию п.5
        -   Для AvailableSavingsProductInfoMto\\id=\_SavingsAccountId\_
             согласно функциональному требованию п.6
        -   В иных случаях согласно функциональному требованию п.2
    -   Отображаются в формате X XХX,XX P. Если значение не помещается в
        поле (накладывается на ставку, больше одной строки), то шрифт
        уменьшается до корректного отображения.
-   Индикаторы пополнения и снятия, отображаются аналогично FRM 5.2.1
-   Кнопка "Подробнее", при нажатии на которую осуществляется переход на
    FRM 5.2.3
-   Кнопка "Открыть", при нажатии на которую запускается операция
    открытия вклада согласно функциональным требованиям п.1 у FRM 5.2.4
    , отображается   FRM 5.2.4
-   Плашка "МАКСИМАЛЬНЫЙ ДОХОД". Текст хранится на приложении,
    отображается на всех карточках с максимальным значением дохода.

​3. Если список подобранных вкладов пустой, то отображается текст об
отсутствии подобранных вкладов. Текст мобильное приложение получает из
ресурсов Минервы с параметрами GroupName=BR-11766SavingsProducts и
Name=SelectorEmptyResult в соответствии с  [функциональными требованиями
1.7](http://intra.b-s-c.ru/wiki/pages/viewpage.action?pageId=70025290)

##### Информационная подсказка

1. Текст подсказки "Расчёт носит информационный характер" хранится в
коде мобильного приложения

​2. Отображается только если есть подобранные вклады.

### Функциональные требования

##### 5.2.10.1

FRM5.2.10FR1

Список подобранных вкладов формируется по следующему алгоритму:

-   Вклады фильтруются в зависимости от выбранной в подборщике валюты.
    Если валюта вклада не совпадает с выбранной, то такой вклад не
    отображается.
-   Вклады фильтруются по сумме - минимальная сумма для открытия вклада
    должна быть меньше или равна введённой в поле. Фильтрация
    применяется после изменения значения поля согласно функциональному
    требованию п.4
-   Вклады фильтруются по сроку:

    -   Для продуктов AvailableSavingsProductInfoMto\\id=\_MoneyBoxId\_
        и AvailableSavingsProductInfoMto\\id=\_SavingsAccountId\_
        фильтрация не применяется, они считаются подобранными вне
        зависимости от выбранного срока.
    -   Остальные  вклады должны соответствовать одному из двух условий:
        -   У вклада есть срок, включающий в себя выбранный (например
            срок 90-180 дн, если в поле введено 120 дн.)
        -   У вклада есть однодневный срок, который попадает в границы
            150 дн. от выбранного. Если в поле введено 380 дн., то срок
            однодневного вклада должен находится в пределах 230-530 дн.
            (240-240, 530-530 и 230-230 подходят, а 160-160 нет.).
-   Для каждого вклада есть несколько вариантов в зависимости от
    минимальной суммы. В карусели подборщика отображается:
    -   Для AvailableSavingsProductInfoMto\\id=\_MoneyBoxId\_ и
        AvailableSavingsProductInfoMto\\id=\_SavingsAccountId\_ только
        один вариант с минимальной суммой.
    -   Для остальных накопительных продуктов только один вариант с
        максимальной суммой.
-   Полученные вклады в подборщике необходимо сортировать по полю
    "Доход", сначала вклады с наибольшим доходом. Если доход одинаковый,
    то порядок вкладов соответствует порядку на карусели вкладов FRM
    5.2.1 .

##### 5.2.10.2

FRM5.2.10FR2

Формулы для расчёта данных на карточке подобранных вкладов:

1. Доход:

S'=(S\*(1+I)-S)/365\*j, где

-   S - сумма вклада
-   I - ставка (номинальная или эффективная в зависимости от
    переключателя), соответствует выбранному сроку, для однодневных
    вкладов выбранному количеству дней
-   j - количеств о дне й во вкладе. Для однодневных вкладов
    соответствует сроку, на который можно открыть вклад. Если таких
    сроков несколько, то отображается наиболее близкий к выбранному в
    поле со сроком (Примечание: Если удалённость одинаковая, то
    выбирается наименьший). Для остальных вкладов соответствует колич
    еству дней при выборе произвольного периода или количеству дней,
    высчитанных из месяца в соответствии с требованиями п. 3

​2. Сумма к концу периода:

S''=S+S', где

-   S - сумма вклада, введённая пользователем
-   S' - доход.

​3. Доход в месяц:

S'мес=S'/кол-во месяцев, где

-   Кол-во месяцев = срок в днях\\365\*12

Файл с формулами расчёта -

##### 5.2.10.3

FRM5.2.10FR3

Число дней для месяцев принимается равным:

-   1 мес. - 31 день
-   3 мес. - 91 день
-   6 мес. - 181 дня
-   1 год - 365 дней
-   1,5 года - 546 дней
-   2 года - 732 дня
-   3 года - 1102 дня
-   4 года - 1463 дня
-   5 лет - 1830 дней

##### 5.2.10.4

FRM5.2.10FR4

Изменения в поле суммы применяются после краткого ожидания (если
пользователь ничего не вводит и не стирает в течении 0,5 сек), либо
после переключения валюты.

\

##### 5.2.10.5

FRM5.2.10FR5

Формулы для расчёта данных на карточке накопительного счёта "Копилка":

1. Доход:

Gp=G1\*N1+G2\*N2+...+Gn\*Nn, где

-   G=B1\*R1/(365\*100)+B2\*R2/(365\*100), где:
    -   B1 - сумма, которая не превышает предельную. Соответствует
        введённой, если меньше
        AvailableSavingsProductInfoMto/limitAmount, в противном случае
        равна AvailableSavingsProductInfoMto/limitAmount.
    -   R1 - процентная ставка для суммы, не превышающей предельную.
        Передаётся в поле effectiveRate.
    -   B2 - сумма, превышающая предельную. Рассчитывается как
        B2=введённая - предельная. При отрицательном значении
        принимается равной 0. Предельная сумма передаётся в поле 
        AvailableSavingsProductsResponse/AvailableSavingsProductInfoMto/limitsAndRates/limitAmount
        для выбранной валюты (поле limitsAndRates/isoCode должно
        совпадать с
        byCurrencyByMinBalanceTermRangeInfos/CurrencyMto/codeIso)
    -   R2 - процентная ставка для суммы, превышающей предельную.
        Передаётся в
        поле AvailableSavingsProductsResponse/AvailableSavingsProductInfoMto/limitsAndRates/limitRate для
        выбранной валюты (поле limitsAndRates/isoCode должно совпадать с
        byCurrencyByMinBalanceTermRangeInfos/CurrencyMto/codeIso)
-   N - количеств о дне й:
    -   Если период один, то N= выбранный срок, который соответствует
        количеству дней при выборе произвольного периода или количеству
        дней, высчитанных из месяца в соответствии с требованиями п. 3
        (при единственном интервале 121-null и сроке 180 N=180)
    -   Если периодов несколько, то высчитывается для каждого периода:
        -   Для первого интервала равно его верхней границе (при первом
            интервале 30-90 N=90). 
        -   Для последнего интервала равно разнице между верхней
            границей предыдущего интервала и выбранному сроку, который
            соответствует количеству дней при выборе произвольного
            периода или количеству дней, высчитанных из месяца в
            соответствии с требованиями п. 3 (при последнем интервале
            121-160, предыдущем 90-120 и сроке 180 N=180-120=60)
        -   Для промежуточных интервалов равен разнице между верхней
            границей интервала и верхней границей предыдущего интервала
            (при нижнем интервале 30-90 и верхнем 121-160 для интервала
            91-120 посередине N=120-90=30)

​2. Сумма к концу периода:

S'=S+Gp, где

-   S - сумма, введённая пользователем
-   Gp - доход.

​3. Доход в месяц:

Gpмес=Gp/кол-во месяцев, где

-   Кол-во месяцев = срок в днях\\365\*12

Файл с формулами расчёта -

##### 5.2.10.6

FRM5.2.10FR6

Формулы для расчёта данных на карточке накопительного счёта:

1. Доход:

P~макс~=Макс(P~итог~) (Максимальный %, начисленный накопительным итогом
среди всех месяцев), где

-   P~итогn~ (%, начисленный накопительным итогом за определённый
    период):
    -   Если Pn\>0, то P~итогn~ = сумма от P~1~ до Pn, где n -номер
        месяца
    -   Иначе P~итогn~  = 0
-   Pn=(dn\*Sn\*Rn)/Yn, значение Pn вычисляется только если это
    возможно, полученное значение округляется до двух знаков, где:
    -   dn - дни в периоде:
        -   dn = dконn - dначn, вычисляется только если это возможно
    -   Sn - накопления в периоде, для первого периода S1=сумма счёта,
        для остальных:
        -   Если dn\>0, то Sn=S~n-1~+P~итогn-1~
        -   Иначе Sn=0
    -   Rn - средняя ставка периода,
        R~n~=((B~1n~-B~2n~)\*r~1n~+(B~2n~-B~3n~)\*r~2n~+...+(B~m-1\\ n-1~-B~m-1\\ n-1~)\*r~m-1~ ~n-1~+B~mn~\*r~mn~)/B~1n~,
        где m-число интервалов у счёта. Каждое слагаемое в формуле,
        например  "(B1n-B2n)\*r1n" округляется до двух знаков после
        запятой.
    -   Yn - число дней в году для данного месяца, Yn=365 или 366
-   dконn - завершение процентного периода:
    -   для первого периода dкон1= минимум среди срока счёта и конца
        текущего месяца
    -   для остальных периодов dконn =минимум среди срока счёта и конца
        следующего месяца
-   dначn - начало процентного периода:
    -    для первого периода dнач1= текущая дата
    -   для остальных периодов:
        -   Если dкон~n-1~\>=Дата закрытия счёта, то dначn =dконn-1
        -   Иначе dначn =0
-   Вmn - остаток средств для процентного интервала m и периода n:
    -   Для B1n=Sn
    -   Для остальных Bmn=Минимум среди Bn-i, Bn-i+1, Bn-i+2, ... , Bn,
        где i -число месяцев в данном интервале счёта, рассчитанных в
        соответствии с требованием 4 для FRM 5.2.1 для поля
        DepositTermRangeInfoMto/minimumTermInDays
-   r~mn~ - ставка для процентного интервала m и периода n:
    -   Если соответствующий Вmn != 0, то r~mn~ =
        DepositTermRangeInfoMto/effectiveRate для соответствующего
        периода
    -   Иначе r~mn~ = 0

​2. Сумма к концу периода:

S'=S+Pмакс, где

-   S - сумма вклада, введённая пользователем
-   Pмакс - доход.

​3. Доход в месяц:

Sмес=Pмакс/кол-во месяцев, где

-   Кол-во месяцев = срок в днях\\365\*12

Файл с формулами расчёта - 

FRM 5.2.11 Выбор срока в подборщике FRM5.2.11
---------------------------------------------

**\
**

**Экран с информацией о том, что клиенту не доступны вклады**  

### Экранная спецификация формы "Информация о том, что клиенту не доступны вклады"

##### Стрелка "Назад"

При нажатии осуществляет возврат на FRM 5.2.10

##### Заголовок

Значение заголовка "Срок вклада" хранится на стороне мобильного
приложения

##### Список сроков

1. Состоит из списка сроков :

-   Подписана сверху как "СРОК", текст хранится на стороне мобильного
    приложения
-   Сроки отображаются с пометкой "мес."
-   Справа от выбранного срока отображается символ галочки в синем
    цвете.
-   Отображает значения сроков, хранящихся в коде приложения:
    -   1 мес.
    -   3 мес.
    -   6 мес.
    -   1 год
    -   1,5 года
    -   2 года
    -   3 года
    -   4 года
    -   5 лет

\

​2. При выборе срока из списка происходит возврат на форму FRM 5.2.10 с
установкой выбранного срока со ставкой в "поле выбора срока вклада"

​3. При скролировании большого количества сроков подзаголовок с подписью
столбцов остаётся прижатым кверху экранной формы и не скроллируется.

##### Кнопка "Произвольный период"

1. Название кнопки "Выбрать дату закрытия вклада" содержится в коде
мобильного приложения

​2. Справа от кнопки содержится элемент календаря для выбора срока в
днях

​3. При нажатии на элемент календаря отображается стандартный для
приложения календарь (для iOS в виде барабана, для Android в виде
календарной сетки)

​4. В календаре можно выбрать срок от {текущая дата+1 день} до {текущая
дата+61 месяц} (срок в 61 месяц пересчитывается в дни согласно
функциональным требованиям п. 3 у FRM 5.2.10 )

​5. При выборе срока в календаре происходит возврат на форму FRM 5.2.10
с установкой выбранного срока со ставкой в "поле выбора срока вклада"

​6. Если выбрать произвольный период и снова вернутся на форму со
списком сроков, то произвольный срок должен быть добавлен в список в
порядке увеличения срока (если совпадает с другим сроком из списка, то
выбирается срок из списка, а произвольный не добавляется). Произвольный
срок при этом отображается как "до [dd.mm](http://dd.mm).yyyy". При
выборе срока из списка или добавлении другого произвольного срока
предыдущий произвольный исчезает из списка.

​7. Кнопка выбора произвольного периода должна отображаться всегда, на
маленьких экранах она прибита к низу (остальные пункты списка скролятся
под неё), на больших экранах отображается последним пунктом.

FRM 5.2.12 Форма "Сбережения" FRM5.2.12
---------------------------------------

**\
**

**Экран с информацией о том, что клиенту не доступны вклады**

### Экранная спецификация

##### Заголовок

Значение заголовка отображается из поля
AvailableSavingsProductsResponse/savingsOption/screenTitle

##### Кнопка "Назад"

При нажатии осуществляется переход на FRM 5.2.3

##### Подзаголовок

Текст отображается из
AvailableSavingsProductsResponse/savingsOption/fullTitle

##### Картинка

Картинка карты загружается по ссылке из поля
AvailableSavingsProductsResponse/savingsOption/cardImage с учётом
функционального требования 2

##### Подпись под картинкой

Текст отображается из
AvailableSavingsProductsResponse/savingsOption/titleDescription

##### Таблица с информацией об опции "Сбережения"

1. Информация для отображения таблицы передаётся в поле
AvailableSavingsProductsResponse/savingsOption/table

​2. Количество столбцов соответствует количеству Column в поле
AvailableSavingsProductsResponse/savingsOption/table

​3. Количество строк в каждом столбце соответствует количеству entries в
поле AvailableSavingsProductsResponse/savingsOption/table/Column

​4. Значение в каждой строке соответствует полю
AvailableSavingsProductsResponse/savingsOption/table/Column/entries/value

​5. Первая строка таблицы считается заголовком и форматируется согласно
макету

##### Заголовок информации о порядке получении бонусов

Текст отображается из поля
AvailableSavingsProductsResponse/savingsOption/helpTitle

##### Схема порядка получения бонусов

1. Схема представляет собой последовательность блоков

​2. Количество блоков соответствует количеству helpBlock из поля
AvailableSavingsProductsResponse/savingsOption/help

​3. Каждый блок состоит из:

-   Иконки, загружается по ссылке из поля
    AvailableSavingsProductsResponse/savingsOption/help/HelpBlock/blockImagePath
    с учётом функционального требования 2
-   Заголовка блока, отображается из поля
    AvailableSavingsProductsResponse/savingsOption/help/HelpBlock/blockTitle
-   Текста блока, отображается из поля
    AvailableSavingsProductsResponse/savingsOption/help/HelpBlock/blockDescription

Информация о порядке получения бонусов

1. Текст отображается из поля
AvailableSavingsProductsResponse/savingsOption/bottomDescription

​2. Текст должен поддерживать
[форматирование](https://support.bsc-ideas.com/confl/pages/viewpage.action?pageId=81567501)

### Функциональные требования

##### 5.2.12.1

FRM5.2.12FR1

Если какие-либо данные не были получены, то соответствующие поля не
отображаются, пространство без данных схлопывается (например при
отсутствии подписи под картинкой на её месте отображается таблица)

##### 5.2.12.2

FRM5.2.12FR2

Для получения картинок приложение должно сформировать абсолютный URL.
Для формирования абсолютного пути до картинок в CQ5 мобильное приложение
должно взять URL из поля AvailableSavingsProductsResponse/rootURL,
обрезать его до первого слэша и добавить к относительному пути для URL
картинки.

\

\

\

\

\
